import{_,d as v,u as m,r as k,o as w,c as b,w as u,v as n,a as t,b as o,e as d,n as c,t as S,p as D,f as B,g as F}from"./index.0243e4fd.js";import{r as y,u as x}from"./axios.40ee53c3.js";function C(a,i){return y({method:"get",url:"/login/cellphone",params:{phone:a,password:i}})}const p=a=>(D("data-v-463fd996"),a=a(),B(),a),E={class:"background"},I={class:"login-page"},R=p(()=>o("p",{class:"login-phone"},"\u7528\u6237\u767B\u5F55",-1)),A=p(()=>o("br",null,null,-1)),N={class:"loading-mask"},P=F('<div class="sk-folding-cube" data-v-463fd996><div class="sk-cube1 sk-cube" data-v-463fd996></div><div class="sk-cube2 sk-cube" data-v-463fd996></div><div class="sk-cube4 sk-cube" data-v-463fd996></div><div class="sk-cube3 sk-cube" data-v-463fd996></div></div>',1),V=[P],q={class:"res-container"},J=v({setup(a){x();const i=m();let e=k({isRegisterShow:!0,qrImg:"",qrKey:"",phone:"",password:"",msg:"",istrue:!1,loading:!1});const g=()=>{e.isRegisterShow=!e.isRegisterShow},h=()=>{if(e.loading=!0,!e.password||!e.phone){alert("\u8D26\u53F7\u6216\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"),e.loading=!1;return}else if(f())C(e.phone,e.password).then(s=>{console.log(s,111);try{s.data.code===200&&(console.log("\u6210\u529F"),localStorage.setItem("token",JSON.stringify(s.data.token)),localStorage.setItem("userProfile",JSON.stringify(s.data.profile)),e.loading=!1,i.push("/home")),s.data.code!==200&&(console.log("\u5931\u8D25"),console.log(s.data.msg),e.msg=s.data.msg,e.loading=!1,e.istrue=!0,console.log(e.istrue,e.loading),setTimeout(()=>{e.istrue=!1},2e3))}catch{console.log(s),e.loading=!1,e.msg="\u8D26\u53F7\u4E0D\u5B58\u5728"}}).catch(s=>{console.log(s),e.loading=!1,e.msg="\u8D26\u53F7\u4E0D\u5B58\u5728"});else{alert("\u624B\u673A\u53F7\u7801\u4E0D\u5408\u6CD5"),e.loading=!1;return}},f=()=>!!/^[1][3,4,5,7,8][0-9]{9}$/.test(e.phone);return(s,l)=>(w(),b("div",E,[u(o("div",{class:"iconfont",onClick:g},"\uE60D",512),[[n,t(e).isRegisterShow]]),u(o("div",I,[R,o("form",null,[u(o("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=r=>t(e).phone=r),placeholder:"\u8BF7\u8F93\u5165\u624B\u673A\u53F7\u7801",style:{height:"50px",width:"200px","background-color":"transparent",border:"0",outline:"none"}},null,512),[[d,t(e).phone]]),A,u(o("input",{type:"password","onUpdate:modelValue":l[1]||(l[1]=r=>t(e).password=r),placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801",style:{height:"50px",width:"200px","background-color":"transparent",border:"0",outline:"none"}},null,512),[[d,t(e).password]])]),o("p",{class:"login",onClick:h},"\u767B\u5F55")],512),[[n,!t(e).isRegisterShow]]),u(o("div",N,V,512),[[n,t(e).loading]]),u(o("div",q,[o("p",{class:c(["res1",{opacity:t(e).istrue}])},"\u624B\u673A\u53F7\u7801\u4E0D\u5408\u6CD5",2),o("p",{class:c(["res2",{opacity:t(e).istrue}])},S(t(e).msg),3)],512),[[n,t(e).istrue]])]))}});var T=_(J,[["__scopeId","data-v-463fd996"]]);export{T as default};
